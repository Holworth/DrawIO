<mxfile host="app.diagrams.net" modified="2022-12-11T07:57:55.520Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36" etag="oKTM1L9vSPOXeVc2VYPI" version="20.6.0" type="github">
  <diagram id="GQswBAs9rWUTwK8a14QV" name="第 1 页">
    <mxGraphModel dx="5336" dy="1318" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="4681" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-1" value="&lt;font style=&quot;font-size: 15px;&quot;&gt;&lt;b&gt;StorageManager::Initialize( )&lt;/b&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="282" y="154" width="363" height="51" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-2" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="282" y="205" width="363" height="278" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=15;" parent="1" source="OjtDRb3r2wVRJjBGD-eC-3" target="OjtDRb3r2wVRJjBGD-eC-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-3" value="StorageManager::CreateBufferManager( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="310" y="222" width="319" height="46" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=15;" parent="1" source="OjtDRb3r2wVRJjBGD-eC-4" target="OjtDRb3r2wVRJjBGD-eC-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="1" source="OjtDRb3r2wVRJjBGD-eC-4" target="OjtDRb3r2wVRJjBGD-eC-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="218" y="627" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-4" value="catalog.CreateSchema( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="310" y="319" width="319" height="46" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;" edge="1" parent="1" source="OjtDRb3r2wVRJjBGD-eC-6" target="VM_0vS1CVFmWydNHuRjW-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-6" value="StorageManager::LoadDatabase( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="310" y="416" width="319" height="46" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-8" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="629" y="284" width="61" height="120" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-9" value="&lt;b&gt;Defend by &lt;i&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Connection::BeginTransaction( ) Connection::Commit( )&lt;/font&gt;&lt;/i&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="696" y="331" width="235" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-11" value="&lt;i&gt;CreateSchemaInfo&lt;/i&gt; info&lt;br&gt;info.Schema=&lt;b&gt;DEFAULT_SCHEMA&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="-79" y="548" width="238" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-1" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Create a default schema&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-47" y="608" width="183" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-2" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;SingleFileStorageManager::LoadDatabase( )&lt;/b&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="287.5" y="570" width="364" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-3" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="287.5" y="620" width="364" height="212" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-4" target="VM_0vS1CVFmWydNHuRjW-9">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="732" y="670" />
              <mxPoint x="732" y="529" />
              <mxPoint x="1015" y="529" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-4" value="SingleFileCheckpointReader::LoadFromStorage( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="287.5" y="648" width="363" height="44" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-5" value="WriteAheadLog::Replay( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="287.5" y="755" width="364" height="38" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-7" value="&lt;b&gt;Load the latest checkpoint&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="365" y="692.5" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-8" value="&lt;b&gt;reply the WAL&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="362" y="793" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-9" value="&lt;b&gt;SingleFileCheckpointReader::LoadFromStorage( )&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="814" y="570" width="402" height="49" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-10" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="814" y="617" width="401" height="213" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;startArrow=none;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-15" target="VM_0vS1CVFmWydNHuRjW-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-11" value="SingleFileBlockManager::GetMetaBlock( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="856" y="640" width="324" height="47" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-12" target="VM_0vS1CVFmWydNHuRjW-17">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1244" y="766" />
              <mxPoint x="1244" y="528" />
              <mxPoint x="1508" y="528" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-12" value="CheckpointReader::LoadCheckpoint( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="856" y="742" width="324" height="47" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-15" value="&lt;font color=&quot;#ff0000&quot;&gt;MetaBlockReader&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="936.5" y="699" width="163" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;endArrow=none;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-11" target="VM_0vS1CVFmWydNHuRjW-15">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1018" y="687" as="sourcePoint" />
            <mxPoint x="1018" y="742" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-17" value="&lt;b&gt;CheckPointReader::LoadCheckpoint( )&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="1307" y="570" width="402" height="49" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-18" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="1307" y="619" width="403" height="206" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-20" value="&lt;font color=&quot;#000000&quot;&gt;schema_count = MetaBlockReader.Read()&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="1348" y="645" width="335" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-21" value="For each schema_count:" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1325" y="692" width="243" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-22" target="VM_0vS1CVFmWydNHuRjW-24">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1737" y="768" />
              <mxPoint x="1737" y="529" />
              <mxPoint x="2024" y="529" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-22" value="CheckpointReader::ReadSchema( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1366" y="742" width="285" height="52" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-24" value="&lt;b&gt;CheckpointReader::ReadSchema( )&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="1823" y="571" width="402" height="49" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-26" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1823" y="620" width="402" height="194" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-28" target="VM_0vS1CVFmWydNHuRjW-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-28" value="info = SchemaCatalogEntry::Deserialize( )&lt;br&gt;catalog.CreateSchema(info)" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1865.5" y="643" width="317" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-29" target="VM_0vS1CVFmWydNHuRjW-31">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2247" y="768" />
              <mxPoint x="2247" y="530" />
              <mxPoint x="2513" y="530" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-29" value="CheckpointReader::ReadTable( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1865.5" y="748" width="317" height="41" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-31" value="&lt;b&gt;CheckpointReader::ReadTable( )&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="2312" y="570" width="402" height="49" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-32" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="2312" y="620" width="402" height="192" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-35" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-33" target="VM_0vS1CVFmWydNHuRjW-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;fontColor=#FF0000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-33" target="VM_0vS1CVFmWydNHuRjW-37">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2758" y="673" />
              <mxPoint x="2758" y="533" />
              <mxPoint x="3002" y="533" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-33" value="CheckpointReader::ReadTableData( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="2365" y="652.5" width="317" height="41" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-34" value="Catalog::CreateTable( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="2365" y="745" width="317" height="41" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-37" value="&lt;b&gt;CheckpointReader::ReadTableData( )&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="2835" y="570" width="334" height="49" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-38" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="2835" y="619" width="334" height="192" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-40" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;TableDataReader::ReadTableData( )&lt;/font&gt;&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="2848" y="667" width="303" height="43" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-42" value="Read table data from disk, however, we need to know the storage format to understand this piece of code" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="2848" y="742" width="304" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
