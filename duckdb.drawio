<mxfile host="app.diagrams.net" modified="2022-12-17T02:41:23.846Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36" etag="D5OW1fri5whcSbvqmu4i" version="20.6.0" type="github">
  <diagram id="GQswBAs9rWUTwK8a14QV" name="第 1 页">
    <mxGraphModel dx="4997" dy="1098" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="4681" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-1" value="&lt;font style=&quot;font-size: 15px;&quot;&gt;&lt;b&gt;StorageManager::Initialize( )&lt;/b&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="282" y="154" width="363" height="51" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-2" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="282" y="205" width="363" height="278" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=15;" parent="1" source="OjtDRb3r2wVRJjBGD-eC-3" target="OjtDRb3r2wVRJjBGD-eC-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-3" value="StorageManager::CreateBufferManager( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="310" y="222" width="319" height="46" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=15;" parent="1" source="OjtDRb3r2wVRJjBGD-eC-4" target="OjtDRb3r2wVRJjBGD-eC-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=14;" parent="1" source="OjtDRb3r2wVRJjBGD-eC-4" target="OjtDRb3r2wVRJjBGD-eC-11" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="218" y="627" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-4" value="catalog.CreateSchema( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="310" y="319" width="319" height="46" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;" edge="1" parent="1" source="OjtDRb3r2wVRJjBGD-eC-6" target="VM_0vS1CVFmWydNHuRjW-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-6" value="StorageManager::LoadDatabase( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="310" y="416" width="319" height="46" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-8" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="629" y="284" width="61" height="120" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-9" value="&lt;b&gt;Defend by &lt;i&gt;&lt;font style=&quot;font-size: 14px;&quot;&gt;Connection::BeginTransaction( ) Connection::Commit( )&lt;/font&gt;&lt;/i&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=15;" parent="1" vertex="1">
          <mxGeometry x="696" y="331" width="235" height="30" as="geometry" />
        </mxCell>
        <mxCell id="OjtDRb3r2wVRJjBGD-eC-11" value="&lt;i&gt;CreateSchemaInfo&lt;/i&gt; info&lt;br&gt;info.Schema=&lt;b&gt;DEFAULT_SCHEMA&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" parent="1" vertex="1">
          <mxGeometry x="-79" y="548" width="238" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-1" value="&lt;font style=&quot;font-size: 14px;&quot;&gt;Create a default schema&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-47" y="608" width="183" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-2" value="&lt;font style=&quot;font-size: 16px;&quot;&gt;&lt;b&gt;SingleFileStorageManager::LoadDatabase( )&lt;/b&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="287.5" y="570" width="364" height="50" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-3" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="287.5" y="620" width="364" height="212" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-4" target="VM_0vS1CVFmWydNHuRjW-9">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="732" y="670" />
              <mxPoint x="732" y="529" />
              <mxPoint x="1015" y="529" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-4" value="SingleFileCheckpointReader::LoadFromStorage( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="287.5" y="648" width="363" height="44" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-5" value="WriteAheadLog::Replay( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="287.5" y="755" width="364" height="38" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-7" value="&lt;b&gt;Load the latest checkpoint&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="365" y="692.5" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-8" value="&lt;b&gt;reply the WAL&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="362" y="793" width="220" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-9" value="&lt;b&gt;SingleFileCheckpointReader::LoadFromStorage( )&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="814" y="570" width="402" height="49" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-10" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="814" y="617" width="401" height="213" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;startArrow=none;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-15" target="VM_0vS1CVFmWydNHuRjW-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-11" value="SingleFileBlockManager::GetMetaBlock( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="856" y="640" width="324" height="47" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-12" target="VM_0vS1CVFmWydNHuRjW-17">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1244" y="766" />
              <mxPoint x="1244" y="528" />
              <mxPoint x="1508" y="528" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-12" value="CheckpointReader::LoadCheckpoint( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="856" y="742" width="324" height="47" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-15" value="&lt;font color=&quot;#ff0000&quot;&gt;MetaBlockReader&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="936.5" y="699" width="163" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;endArrow=none;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-11" target="VM_0vS1CVFmWydNHuRjW-15">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1018" y="687" as="sourcePoint" />
            <mxPoint x="1018" y="742" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-17" value="&lt;b&gt;CheckPointReader::LoadCheckpoint( )&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="1307" y="570" width="402" height="49" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-18" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="1307" y="619" width="403" height="206" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-20" value="&lt;font color=&quot;#000000&quot;&gt;schema_count = MetaBlockReader.Read()&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="1348" y="645" width="335" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-21" value="For each schema_count:" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1325" y="692" width="243" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;fontColor=#FF0000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-22" target="VM_0vS1CVFmWydNHuRjW-24">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1508" y="850" />
              <mxPoint x="1023" y="850" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-22" value="CheckpointReader::ReadSchema( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1366" y="742" width="285" height="52" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-24" value="&lt;b&gt;CheckpointReader::ReadSchema( )&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="822" y="940.0000000000001" width="402" height="49" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-26" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="822" y="989.0000000000001" width="402" height="194" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-28" target="VM_0vS1CVFmWydNHuRjW-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-28" value="info = SchemaCatalogEntry::Deserialize( )&lt;br&gt;catalog.CreateSchema(info)" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="864.5" y="1012.0000000000001" width="317" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-29" target="VM_0vS1CVFmWydNHuRjW-31">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1246" y="1137" />
              <mxPoint x="1246" y="899.0000000000001" />
              <mxPoint x="1512" y="899.0000000000001" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-29" value="CheckpointReader::ReadTable( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="864.5" y="1117" width="317" height="41" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-31" value="&lt;b&gt;CheckpointReader::ReadTable( )&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="1311" y="939.0000000000001" width="402" height="49" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-32" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1311" y="988.0000000000001" width="402" height="193" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-35" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-33" target="VM_0vS1CVFmWydNHuRjW-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;fontColor=#FF0000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-33" target="VM_0vS1CVFmWydNHuRjW-37">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1757" y="1042" />
              <mxPoint x="1757" y="902.0000000000001" />
              <mxPoint x="2001" y="902.0000000000001" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-33" value="CheckpointReader::ReadTableData( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1364" y="1021.5000000000001" width="317" height="41" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-34" value="Catalog::CreateTable( )" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1364" y="1114" width="317" height="41" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-37" value="&lt;b&gt;CheckpointReader::ReadTableData( )&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="1834" y="939.0000000000001" width="334" height="49" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-38" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1834" y="988.0000000000001" width="334" height="192" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-40" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;TableDataReader::ReadTableData( )&lt;/font&gt;&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1847" y="1036" width="303" height="43" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-42" value="Read table data from disk, however, we need to know the storage format to understand this piece of code" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="1847" y="1111" width="304" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-44" value="BlockManager" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="54" y="2287" width="474" height="94" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-46" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;fontSize=16;fontColor=#FF0000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-44">
          <mxGeometry y="26" width="474" height="8" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-47" value="mutex blocks_lock&#xa;unordered_map&lt;block_id_t, weak_ptr&lt;BlockHandle&gt;&gt; blocks" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;fontColor=#000000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-44">
          <mxGeometry y="34" width="474" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-48" value="SingleFileBlockManager" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="68" y="2457" width="445" height="462" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-49" value="+ db : DatabaseInstance&amp;&#xa;+ path : string&#xa;+ handle : unique_ptr&lt;FileHandle&gt;&#xa;+ header_buffer : FileBuffer&#xa;+ free_list : set&lt;block_id_t&gt;&#xa;+ multi_use_blocks : unordered_map&lt;block_id_t, uint32_t&gt;&#xa;+ modified_blocks : unordered_set&lt;block_id_t&gt; &#xa;+ meta_block : block_id_t&#xa;+ max_block : block_id_t&#xa;+ free_list_id : block_id_t&#xa;&#xa;&#xa;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;fontColor=#000000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-48">
          <mxGeometry y="26" width="445" height="223" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-50" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;fontSize=16;fontColor=#000000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-48">
          <mxGeometry y="249" width="445" height="8" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-51" value="+ unique_ptr&lt;Block&gt; CreateBlock(block_id_t, FileBuffer*) &#xa;+ block_id_t GetFreeBlockId( )&#xa;+ bool IsRootBlock(block_id_t)&#xa;+ void MarkBlockAsFree(block_id_t)&#xa;+ void MarkBlockAsModified(block_id_t)&#xa;+ IncreaseBlockReferenceCounter(block_id_t)&#xa;+ void Read(Block&amp;)&#xa;+ void Write(FileBuffer&amp; block, block_id_t)&#xa;+ void WriteHead(DatabaseHeader)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;fontColor=#000000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-48">
          <mxGeometry y="257" width="445" height="205" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-52" value="FileBuffer" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="670" y="2576" width="337" height="371" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-53" value="+ allocator : Allocator&amp;&#xa;+ type : FileBufferType&#xa;&#xa;+ buffer : data_ptr_t&#xa;+ size : uint64_t &#xa;&#xa;+ internal_buffer : data_ptr_t&#xa;+ internal_size : uint64_t&#xa;&#xa;+ malloced_buffer : data_ptr_t&#xa;+ malloced_size : uint64_t " style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;fontColor=#000000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-52">
          <mxGeometry y="26" width="337" height="229" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-54" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;fontSize=16;fontColor=#000000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-52">
          <mxGeometry y="255" width="337" height="8" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-55" value="+ Read(FileHandle&amp;, uint64_t)&#xa;+ ReadAndChecksum(FileHandle&amp;, uint64_t)&#xa;+ Write(FileHandle&amp;, uint64_t)&#xa;+ ChecksumAndWrite(FileHandle&amp;, uint64_t)" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;fontColor=#000000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-52">
          <mxGeometry y="263" width="337" height="108" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-49" target="VM_0vS1CVFmWydNHuRjW-52">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-57" value="FileHandle" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1157" y="2576" width="337" height="228" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-58" value="+ file_system : FileSystem&#xa;+ path : string&#xa;" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;fontColor=#000000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-57">
          <mxGeometry y="26" width="337" height="55" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-59" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;fontSize=16;fontColor=#000000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-57">
          <mxGeometry y="81" width="337" height="8" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-60" value="+ int64_t Read(void*, idx_t) &#xa;+ int64_t Write(void*, idx_t)&#xa;+ void Read(void*, idx_t, idx_t position)&#xa;+ void Write(void*, idx_t, idx_t position)&#xa;+ void Sync( )&#xa;+ ..." style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;fontColor=#000000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-57">
          <mxGeometry y="89" width="337" height="139" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-55" target="VM_0vS1CVFmWydNHuRjW-57">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-62" value="BLOCK_HEADER_SIZE&lt;br&gt;(8B)" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#b1ddf0;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="222" y="3271" width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-63" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;User Buffer&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#cdeb8b;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="412" y="3271" width="430" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-64" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;Aligned&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=16;fillColor=#ffcc99;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="842" y="3271" width="168" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-65" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;strokeColor=#000000;strokeWidth=2;fontSize=20;fontColor=#000000;rotation=90;" vertex="1" parent="1">
          <mxGeometry x="605" y="2964" width="20" height="780" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-66" value="Malloced Buffer / Internal Buffer &lt;br&gt;(4KiB Aligned)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;strokeWidth=2;fontSize=20;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="524" y="3391" width="197" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-68" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;strokeColor=#000000;strokeWidth=2;fontSize=20;fontColor=#000000;rotation=-90;" vertex="1" parent="1">
          <mxGeometry x="701" y="2958" width="20" height="589" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-69" value="Buffer" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;strokeWidth=2;fontSize=20;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="683" y="3210" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-72" value="" style="endArrow=block;dashed=1;endFill=0;endSize=12;html=1;rounded=0;fontSize=20;fontColor=#000000;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-48" target="VM_0vS1CVFmWydNHuRjW-47">
          <mxGeometry width="160" relative="1" as="geometry">
            <mxPoint x="199" y="2990" as="sourcePoint" />
            <mxPoint x="359" y="2990" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-77" value="BlockHandle" style="swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="736" y="2247" width="474" height="244" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-78" value="" style="line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;strokeColor=inherit;fontSize=16;fontColor=#FF0000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-77">
          <mxGeometry y="26" width="474" height="8" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-79" value="+ lock : mutex&#xa;+ state : atomic&lt;BlockState&gt;&#xa;+ readers : atomic&lt;int32_t&gt;&#xa;+ block_id : const block_id_t&#xa;+ buffer : unique_ptr&lt;FileBuffer&gt;&#xa;+ eviction_timestamp : atomic&lt;idx_t&gt;&#xa;+ can_destroy : bool&#xa;+ memory_usage : idx_t&#xa;+ memory_charge : BufferPoolReservation&#xa;+ unswizzled : const char*" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;fontSize=16;fontColor=#000000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-77">
          <mxGeometry y="34" width="474" height="210" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-80" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.004;entryY=0.088;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=19;fontColor=#000000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-47" target="VM_0vS1CVFmWydNHuRjW-79">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-93" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.454;entryY=1.008;entryDx=0;entryDy=0;entryPerimeter=0;fontSize=16;fontColor=#000000;" edge="1" parent="1" source="VM_0vS1CVFmWydNHuRjW-81" target="VM_0vS1CVFmWydNHuRjW-55">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-81" value="Block" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#000000;strokeWidth=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="716" y="3016" width="215" height="59" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-84" value="+ id : block_id_t" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;strokeWidth=1;fontSize=16;fontColor=#000000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-81">
          <mxGeometry y="26" width="215" height="33" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-94" value="BlockPointer" style="swimlane;fontStyle=1;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;strokeColor=#000000;strokeWidth=1;fontSize=16;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="1044" y="3016" width="215" height="82" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-95" value="+ block_id : block_id_t&#xa;+ offset : uint32_t" style="text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;strokeWidth=1;fontSize=16;fontColor=#000000;" vertex="1" parent="VM_0vS1CVFmWydNHuRjW-94">
          <mxGeometry y="26" width="215" height="56" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-96" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;BLOCK_HEADER_SIZE (8B)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#36393d;strokeWidth=2;fontSize=16;fillColor=#cdeb8b;" vertex="1" parent="1">
          <mxGeometry x="272" y="3672" width="282" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-97" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;BLOCK_SIZE&amp;nbsp;&lt;br&gt;(BLOCK_ALLOC_SIZE - BLOCK_HEADER_SIZE)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#36393d;strokeWidth=2;fontSize=16;fillColor=#cce5ff;" vertex="1" parent="1">
          <mxGeometry x="272" y="3729" width="282" height="172" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-98" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;BLOCK_HEADER_SIZE (8B)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#36393d;strokeWidth=2;fontSize=16;fillColor=#cdeb8b;" vertex="1" parent="1">
          <mxGeometry x="272" y="3901" width="282" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-99" value="&lt;font style=&quot;font-size: 18px;&quot;&gt;BLOCK_SIZE&amp;nbsp;&lt;br&gt;(BLOCK_ALLOC_SIZE - BLOCK_HEADER_SIZE)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#36393d;strokeWidth=2;fontSize=16;fillColor=#cce5ff;" vertex="1" parent="1">
          <mxGeometry x="272" y="3958" width="282" height="172" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-100" value="&lt;font style=&quot;font-size: 21px;&quot;&gt;......&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;strokeWidth=2;fontSize=18;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="272" y="4130" width="282" height="60" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-101" value="" style="shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;labelPosition=right;verticalLabelPosition=middle;align=left;verticalAlign=middle;strokeColor=#000000;strokeWidth=2;fontSize=21;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="565" y="3672" width="20" height="225" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-102" value="&lt;font style=&quot;font-size: 19px;&quot;&gt;BLOCK_ALLOC_SIZE (256KiB)&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;strokeWidth=2;fontSize=21;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="670" y="3777" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="VM_0vS1CVFmWydNHuRjW-103" value="BLOCK_START (12KiB)" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#000000;strokeWidth=2;fontSize=19;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="272" y="3574" width="282" height="98" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
